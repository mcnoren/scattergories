<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scattergories Host Display</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=JetBrains+Mono:wght@500&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
        }
        
        .mono-font {
            font-family: 'JetBrains Mono', monospace;
        }

        /* Animation for the timer when done */
        @keyframes flash-red {
            0%, 100% { background-color: #ef4444; color: white; }
            50% { background-color: #7f1d1d; color: white; }
        }
        
        .timer-done {
            animation: flash-red 1s infinite;
        }

        /* Blur effect for hidden list */
        .list-blur {
            filter: blur(12px);
            user-select: none;
            pointer-events: none;
        }
    </style>
</head>
<body class="bg-slate-900 text-slate-100 min-h-screen flex flex-col">
    <div id="root" class="flex-grow flex flex-col"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- DATA CONSTANTS ---
        const LETTERS = [
            'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 
            'N', 'O', 'P', 'R', 'S', 'T', 'U', 'V', 'W', 'Y'
        ];

        // Official Categories (Lists 1-12) + Refill Packs (Lists 13-16)
        const DEFAULT_CATEGORIES = [
            // List 1
            "A boy’s name", "U.S. Cities", "Things that are cold", "School supplies", "Pro sports teams", "Insects", 
            "Breakfast foods", "Furniture", "TV Shows", "Things found in the ocean", "Presidents", "Product names",
            
            // List 2
            "Vegetables", "States", "Things you throw away", "Occupations", "Appliances", "Cartoon characters", 
            "Types of drink", "Musical groups", "Store names", "Things at a football game", "Trees", "Personality traits",
            
            // List 3
            "Articles of clothing", "Desserts", "Car parts", "Things found on a map", "Athletes", "4-letter words", 
            "Items in a refrigerator", "Farm animals", "Street names", "Things on a beach", "Colors", "Tools",
            
            // List 4
            "Sports", "Song titles", "Parts of the body", "Ethnic foods", "Things you shout", "Birds", 
            "A girl’s name", "Ways to get from here to there", "Items in a kitchen", "Villains/Monsters", "Flowers", "Things you replace",
            
            // List 5
            "Sandwiches", "Items in a catalog", "World leaders/Politicians", "School subjects", "Excuses for being late", "Ice cream flavors", 
            "Things that jump/bounce", "Television stars", "Things in a park", "Foreign cities", "Stones/Gems", "Musical instruments",
            
            // List 6
            "Things that are sticky", "Awards/Ceremonies", "Cars", "Spices/Herbs", "Bad habits", "Cosmetics/Toiletries", 
            "Celebrities", "Cooking utensils", "Reptiles/Amphibians", "Parks", "Leisure activities", "Things you’re allergic to",
            
            // List 7
            "Fictional characters", "Menu items", "Magazines", "Capitals", "Kinds of candy", "Items you save up to buy", 
            "Footwear", "Something you keep hidden", "Items in a suitcase", "Things with tails", "Sports equipment", "Crimes",
            
            // List 8
            "Nicknames", "Things in the sky", "Pizza toppings", "Colleges/Universities", "Fish", "Countries", 
            "Things that have spots", "Historical figures", "Something you’re afraid of", "Terms of measurement", "Items in this room", "Book titles",
            
            // List 9
            "Restaurants", "Notorious people", "Fruits", "Things in a medicine cabinet", "Toys", "Household chores", 
            "Bodies of water", "Authors", "Halloween costumes", "Weapons", "Things that are round", "Words associated with exercise",
            
            // List 10
            "Heroes", "Gifts/Presents", "Terms of endearment", "Kinds of dances", "Things that are black", "Vehicles", 
            "Tropical locations", "College majors", "Dairy products", "Things in a souvenir shop", "Items in your purse/wallet", "World records",
            
            // List 11
            "Baby foods", "Famous duos and trios", "Things found in a desk", "Vacation spots", "Diseases", "Words associated with money", 
            "Items in a vending machine", "Movie titles", "Games", "Things that you wear", "Beers", "Things at a circus",
            
            // List 12
            "Famous females", "Medicine/Drugs", "Things made of metal", "Hobbies", "People in uniform", "Things you plug in", 
            "Animals", "Languages", "Names used in the Bible", "Junk food", "Things that grow", "Companies",

            // List 13 (Refill)
            "Video games", "Electronic gadgets", "Board games", "Things that use a remote", "Card games", "Internet lingo", 
            "Offensive words", "Wireless things", "Computer parts", "Software", "Websites", "Game terms",

            // List 14 (Refill)
            "Things in a grocery store", "Reasons to quit your job", "Things that have stripes", "Tourist attractions", "Diet foods", "Things found in a hospital", 
            "Food/Drink that is green", "Weekend activities", "Acronyms", "Seafood", "Christmas songs", "Words ending in -N",

            // List 15 (Refill)
            "Things found in the water", "Gifts for the bride & groom", "Things you carry", "Things from a stationery store", "Things worn from the waist up", "Things that are white", 
            "Things found in a basement/cellar", "Things that smell bad", "Things you can see", "Things you don't want to hear", "Things that feel soft", "Things that taste spicy",

            // List 16 (Refill)
            "Things that smell good", "Things that are red", "Things you never tasted", "Things that are loud", "Things you shouldn't touch", "Things you see in a city", 
            "Things that feel hot", "People you admire", "Last names", "People who do dangerous jobs", "Couples", "People who work at night"
        ];

        // --- ICONS ---
        const IconDice = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><circle cx="9" cy="9" r="1"/><circle cx="15" cy="15" r="1"/><circle cx="15" cy="9" r="1"/><circle cx="9" cy="15" r="1"/><circle cx="12" cy="12" r="1"/></svg>
        );

        const IconRefresh = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>
        );

        const IconPlay = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="6 3 20 12 6 21 6 3"/></svg>
        );

        const IconPause = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="4" height="16" x="6" y="4"/><rect width="4" height="16" x="14" y="4"/></svg>
        );

        const IconRotate = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/></svg>
        );

        const IconList = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="8" x2="21" y1="6" y2="6"/><line x1="8" x2="21" y1="12" y2="12"/><line x1="8" x2="21" y1="18" y2="18"/><line x1="3" x2="3.01" y1="6" y2="6"/><line x1="3" x2="3.01" y1="12" y2="12"/><line x1="3" x2="3.01" y1="18" y2="18"/></svg>
        );

        const IconPlus = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
        );

        const IconMinus = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line></svg>
        );

        const IconVolume = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14"/></svg>
        );

        const IconVolumeX = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><line x1="23" y1="9" x2="17" y2="15"/><line x1="17" y1="9" x2="23" y2="15"/></svg>
        );

        const IconEdit = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>
        );

        const IconCheck = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
        );

        const IconX = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        );

        const IconMaximize = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"/></svg>
        );

        const IconMinimize = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"/></svg>
        );

        const IconEye = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg>
        );

        const IconEyeOff = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/><line x1="2" x2="22" y1="2" y2="22"/></svg>
        );

        // --- MAIN COMPONENT ---

        function App() {
            // --- STATE ---
            const [gameDuration, setGameDuration] = useState(180); // Default 3 minutes
            const [timeLeft, setTimeLeft] = useState(180);
            
            const [currentLetter, setCurrentLetter] = useState('?');
            
            const [isTimerRunning, setIsTimerRunning] = useState(false);
            const [timerDone, setTimerDone] = useState(false);
            const [isRolling, setIsRolling] = useState(false);
            const [isListVisible, setIsListVisible] = useState(false);
            const [isMuted, setIsMuted] = useState(false);
            const [isFullscreen, setIsFullscreen] = useState(false);

            // Data State
            const [categoryPool, setCategoryPool] = useState(DEFAULT_CATEGORIES);
            const [currentListItems, setCurrentListItems] = useState([]);
            const [listRoundNumber, setListRoundNumber] = useState(1);

            // Edit Modal State
            const [isEditing, setIsEditing] = useState(false);
            const [editValue, setEditValue] = useState("");

            const timerRef = useRef(null);
            const audioCtxRef = useRef(null); // Reference to store the audio context

            // --- AUDIO SETUP ---
            // We need to initialize/resume audio on a user interaction (click)
            // to satisfy browser autoplay policies.
            const initAudio = () => {
                const AudioContext = window.AudioContext || window.webkitAudioContext;
                if (!AudioContext) return;

                if (!audioCtxRef.current) {
                    audioCtxRef.current = new AudioContext();
                }

                if (audioCtxRef.current.state === 'suspended') {
                    audioCtxRef.current.resume();
                }
            };

            // --- FULLSCREEN LOGIC ---
            const toggleFullscreen = () => {
                if (!document.fullscreenElement) {
                    document.documentElement.requestFullscreen().catch(err => {
                        console.error(`Error enabling full-screen mode: ${err.message}`);
                    });
                } else {
                    if (document.exitFullscreen) {
                        document.exitFullscreen();
                    }
                }
            };

            useEffect(() => {
                // Listener for 'F' key
                const handleKeyPress = (e) => {
                    // Don't toggle if user is typing in the edit modal
                    if (isEditing) return;

                    if (e.key.toLowerCase() === 'f') {
                        toggleFullscreen();
                    }
                };

                // Listener for browser fullscreen changes (ESC key, button click, etc.)
                const handleFullscreenChange = () => {
                    setIsFullscreen(!!document.fullscreenElement);
                };

                window.addEventListener('keydown', handleKeyPress);
                document.addEventListener('fullscreenchange', handleFullscreenChange);
                
                return () => {
                    window.removeEventListener('keydown', handleKeyPress);
                    document.removeEventListener('fullscreenchange', handleFullscreenChange);
                };
            }, [isEditing]);

            // --- INITIALIZATION & PERSISTENCE ---
            useEffect(() => {
                // Load from local storage if available
                const savedPool = localStorage.getItem('scattergories_pool');
                if (savedPool) {
                    try {
                        const parsed = JSON.parse(savedPool);
                        if (Array.isArray(parsed) && parsed.length > 12) {
                            setCategoryPool(parsed);
                            generateNewList(parsed);
                        } else {
                            generateNewList(DEFAULT_CATEGORIES);
                        }
                    } catch (e) {
                        console.error("Failed to parse saved categories", e);
                        generateNewList(DEFAULT_CATEGORIES);
                    }
                } else {
                    generateNewList(DEFAULT_CATEGORIES);
                }
                rollLetter();
            }, []);

            // --- AUDIO ---
            const playAlarm = () => {
                if (isMuted) return;
                
                // Ensure context exists (should be created by initAudio on start button)
                if (!audioCtxRef.current) {
                    initAudio();
                }
                
                const ctx = audioCtxRef.current;
                if (!ctx) return;

                // Create a pleasant chime (Sine wave with exponential decay)
                const t = ctx.currentTime;
                const osc = ctx.createOscillator();
                const gain = ctx.createGain();
                
                osc.connect(gain);
                gain.connect(ctx.destination);
                
                osc.type = 'sine';
                
                // Fundamental frequency (High C)
                osc.frequency.setValueAtTime(523.25, t); 
                // Slight detune for richness
                osc.frequency.exponentialRampToValueAtTime(523.25, t + 1.5);

                // Envelope
                gain.gain.setValueAtTime(0, t);
                gain.gain.linearRampToValueAtTime(0.5, t + 0.05); // Attack
                gain.gain.exponentialRampToValueAtTime(0.001, t + 2.0); // Decay
                
                osc.start(t);
                osc.stop(t + 2.0);
                
                // Second harmonic for "bell" sound
                const osc2 = ctx.createOscillator();
                const gain2 = ctx.createGain();
                osc2.connect(gain2);
                gain2.connect(ctx.destination);
                osc2.type = 'sine';
                osc2.frequency.setValueAtTime(1046.5, t); // Octave up
                gain2.gain.setValueAtTime(0, t);
                gain2.gain.linearRampToValueAtTime(0.2, t + 0.05);
                gain2.gain.exponentialRampToValueAtTime(0.001, t + 1.5);
                osc2.start(t);
                osc2.stop(t + 1.5);
            };

            // --- TIMER LOGIC ---
            useEffect(() => {
                if (isTimerRunning && timeLeft > 0) {
                    timerRef.current = setInterval(() => {
                        setTimeLeft((prev) => {
                            if (prev <= 1) {
                                clearInterval(timerRef.current);
                                setIsTimerRunning(false);
                                setTimerDone(true);
                                setIsListVisible(false);
                                playAlarm();
                                return 0;
                            }
                            return prev - 1;
                        });
                    }, 1000);
                } else if (!isTimerRunning) {
                    clearInterval(timerRef.current);
                }
                return () => clearInterval(timerRef.current);
            }, [isTimerRunning, timeLeft, isMuted]);

            const formatTime = (seconds) => {
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                return `${mins}:${secs.toString().padStart(2, '0')}`;
            };

            // --- GAME ACTIONS ---
            const handleStartPause = () => {
                if (timeLeft === 0) return;
                
                // Initialize audio on user interaction
                initAudio();

                const nextState = !isTimerRunning;
                setIsTimerRunning(nextState);
                setIsListVisible(nextState);
            };

            const handleResetTimer = () => {
                setIsTimerRunning(false);
                setTimeLeft(gameDuration);
                setTimerDone(false);
                setIsListVisible(false);
            };

            const adjustTime = (delta) => {
                if (isTimerRunning) return;
                const newTime = Math.max(30, Math.min(900, gameDuration + delta));
                setGameDuration(newTime);
                setTimeLeft(newTime);
                setTimerDone(false);
                setIsListVisible(false);
            };

            const rollLetter = () => {
                setIsRolling(true);
                let count = 0;
                const interval = setInterval(() => {
                    setCurrentLetter(LETTERS[Math.floor(Math.random() * LETTERS.length)]);
                    count++;
                    if (count > 10) {
                        clearInterval(interval);
                        setIsRolling(false);
                        setCurrentLetter(LETTERS[Math.floor(Math.random() * LETTERS.length)]);
                    }
                }, 50);
            };

            // --- LIST LOGIC ---
            const generateNewList = (pool = categoryPool) => {
                if (!pool || pool.length < 12) return;
                
                // Fisher-Yates shuffle logic on a copy
                const shuffled = [...pool];
                for (let i = shuffled.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
                }
                setCurrentListItems(shuffled.slice(0, 12));
            };

            const nextList = () => {
                setListRoundNumber(prev => prev + 1);
                generateNewList();
            };

            const newRound = () => {
                initAudio(); // Initialize audio on new round click
                rollLetter();
                handleResetTimer();
                nextList();
            };

            // --- EDITING LOGIC ---
            const openEditor = () => {
                setEditValue(categoryPool.join('\n'));
                setIsEditing(true);
                // Pause game if editing
                if (isTimerRunning) handleStartPause();
            };

            const saveCategories = () => {
                const lines = editValue.split('\n').map(line => line.trim()).filter(line => line.length > 0);
                if (lines.length < 12) {
                    alert("Please add at least 12 categories.");
                    return;
                }
                setCategoryPool(lines);
                localStorage.setItem('scattergories_pool', JSON.stringify(lines));
                
                // Immediately refresh current list with new data
                generateNewList(lines);
                setIsEditing(false);
            };

            const cancelEdit = () => {
                setIsEditing(false);
            };

            const resetToDefault = () => {
                if(confirm("Reset to original categories? Your custom changes will be lost.")) {
                    setEditValue(DEFAULT_CATEGORIES.join('\n'));
                }
            };

            return (
                <div className="flex flex-col min-h-screen bg-slate-900 text-slate-100 font-sans">
                    
                    {/* Header */}
                    <header className="bg-slate-800 border-b border-slate-700 p-4 shadow-lg z-10">
                        <div className="max-w-6xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4">
                            <div className="flex items-center gap-2">
                                <IconDice />
                                <h1 className="text-2xl font-bold tracking-wider text-indigo-400">SCATTERGORIES <span className="text-white">HOST</span></h1>
                            </div>
                            
                            <div className="flex gap-2 md:gap-3 items-center">
                                <button 
                                    onClick={toggleFullscreen}
                                    className={`text-xs flex items-center gap-2 px-3 py-2 rounded-lg transition-all border ${
                                        isFullscreen 
                                            ? 'bg-indigo-500/20 text-indigo-300 border-indigo-500/50 hover:bg-indigo-500/30 shadow-[0_0_10px_rgba(99,102,241,0.2)]' 
                                            : 'bg-slate-700 text-slate-300 border-slate-600 hover:bg-slate-600 hover:text-white'
                                    }`}
                                    title={isFullscreen ? "Exit Fullscreen (F)" : "Enter Fullscreen (F)"}
                                >
                                    {isFullscreen ? <IconMinimize size={14} /> : <IconMaximize size={14} />}
                                    <span className="hidden sm:inline font-semibold">{isFullscreen ? "Exit Fullscreen" : "Fullscreen"}</span>
                                </button>

                                <button 
                                    onClick={openEditor}
                                    disabled={isTimerRunning}
                                    className={`text-xs flex items-center gap-2 bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg transition-colors border border-slate-600 ${isTimerRunning ? 'opacity-50 cursor-not-allowed' : ''}`}
                                    title="Edit Category Pool"
                                >
                                    <IconEdit size={14}/> Edit Categories
                                </button>

                                <button 
                                    onClick={newRound}
                                    disabled={isTimerRunning}
                                    className={`flex items-center gap-2 bg-indigo-600 hover:bg-indigo-500 text-white px-6 py-2 rounded-full font-bold transition-all shadow-lg hover:shadow-indigo-500/25 active:scale-95 ${isTimerRunning ? 'opacity-50 cursor-not-allowed grayscale' : ''}`}
                                >
                                    <IconRotate /> NEW ROUND
                                </button>
                            </div>
                        </div>
                    </header>

                    <main className="flex-grow p-4 md:p-8 overflow-y-auto">
                        <div className="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-8 h-full">
                            
                            {/* Left Column: Letter & Timer (Adjusted to be 50/50 height) */}
                            <div className="lg:col-span-4 flex flex-col gap-6 h-full">
                                
                                {/* Letter Card - Now flex-1 to take 50% height */}
                                <div className="flex-1 min-h-0 bg-gradient-to-br from-indigo-600 to-purple-700 rounded-3xl p-1 shadow-2xl">
                                    <div className="bg-slate-900 rounded-[20px] p-8 flex flex-col items-center justify-center h-full text-center relative overflow-hidden">
                                        <div className="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500"></div>
                                        
                                        <h2 className="text-slate-400 font-bold text-sm uppercase tracking-[0.2em] mb-2">Current Letter</h2>
                                        
                                        <div className={`text-9xl font-black text-white mb-4 transition-all duration-100 ${isRolling ? 'opacity-50 scale-90' : 'opacity-100 scale-100'}`}>
                                            {currentLetter}
                                        </div>
                                        
                                        <button 
                                            onClick={rollLetter}
                                            disabled={isRolling || isTimerRunning}
                                            className={`text-xs flex items-center gap-1 text-slate-400 hover:text-white transition-colors uppercase font-bold tracking-wider py-2 px-4 rounded border border-slate-700 hover:border-slate-500 ${isTimerRunning ? 'opacity-50 cursor-not-allowed' : ''}`}
                                        >
                                            <IconRefresh /> Reroll Letter
                                        </button>
                                    </div>
                                </div>

                                {/* Timer Card - Now flex-1 to take 50% height */}
                                <div className={`flex-1 min-h-0 rounded-3xl p-1 shadow-2xl transition-all duration-500 ${timerDone ? 'timer-done scale-105 shadow-red-500/50' : 'bg-slate-800'}`}>
                                    <div className={`rounded-[20px] p-6 flex flex-col items-center justify-center h-full text-center border-2 relative ${timerDone ? 'bg-transparent border-white/20' : 'bg-slate-800 border-slate-700'}`}>
                                        
                                        {/* Mute Toggle */}
                                        <button 
                                            onClick={() => setIsMuted(!isMuted)}
                                            className="absolute top-4 right-4 text-slate-500 hover:text-slate-300 transition-colors p-2"
                                            title={isMuted ? "Unmute Sound" : "Mute Sound"}
                                        >
                                            {isMuted ? <IconVolumeX /> : <IconVolume />}
                                        </button>

                                        <h2 className={`font-bold text-sm uppercase tracking-[0.2em] mb-1 ${timerDone ? 'text-white' : 'text-slate-400'}`}>Time Remaining</h2>
                                        
                                        {/* Timer Display & Controls */}
                                        <div className="flex items-center gap-4 mb-6">
                                            {/* Decrease Time */}
                                            {!isTimerRunning && !timerDone && (
                                                <button 
                                                    onClick={() => adjustTime(-30)}
                                                    className="w-8 h-8 rounded-full bg-slate-700 hover:bg-slate-600 flex items-center justify-center text-slate-300 hover:text-white transition-colors"
                                                    aria-label="Decrease time"
                                                >
                                                    <IconMinus />
                                                </button>
                                            )}

                                            <div className={`text-7xl font-mono font-bold tabular-nums tracking-tight ${timeLeft <= 10 && !timerDone && timeLeft > 0 ? 'text-red-400' : 'text-white'}`}>
                                                {formatTime(timeLeft)}
                                            </div>

                                            {/* Increase Time */}
                                            {!isTimerRunning && !timerDone && (
                                                <button 
                                                    onClick={() => adjustTime(30)}
                                                    className="w-8 h-8 rounded-full bg-slate-700 hover:bg-slate-600 flex items-center justify-center text-slate-300 hover:text-white transition-colors"
                                                    aria-label="Increase time"
                                                >
                                                    <IconPlus />
                                                </button>
                                            )}
                                        </div>

                                        <div className="flex gap-3 w-full">
                                            {!isTimerRunning && !timerDone ? (
                                                <button 
                                                    onClick={handleStartPause}
                                                    className="flex-1 flex justify-center items-center gap-2 bg-green-600 hover:bg-green-500 text-white py-3 rounded-xl font-bold transition-colors text-lg shadow-lg shadow-green-900/20"
                                                >
                                                    <IconPlay /> START
                                                </button>
                                            ) : isTimerRunning ? (
                                                <button 
                                                    onClick={handleStartPause}
                                                    className="flex-1 flex justify-center items-center gap-2 bg-yellow-600 hover:bg-yellow-500 text-white py-3 rounded-xl font-bold transition-colors text-lg shadow-lg shadow-yellow-900/20"
                                                >
                                                    <IconPause /> PAUSE
                                                </button>
                                            ) : (
                                                <div className="flex-1 text-xl font-bold flex items-center justify-center uppercase">Time's Up!</div>
                                            )}

                                            <button 
                                                onClick={handleResetTimer}
                                                className="px-4 py-3 bg-slate-700 hover:bg-slate-600 text-slate-200 rounded-xl font-bold transition-colors border border-slate-600"
                                                title="Reset Timer"
                                            >
                                                <IconRefresh />
                                            </button>
                                        </div>
                                    </div>
                                </div>

                            </div>

                            {/* Right Column: The List */}
                            <div className="lg:col-span-8 relative h-full">
                                <div className="bg-slate-800 border border-slate-700 rounded-3xl shadow-xl overflow-hidden h-full flex flex-col relative z-0">
                                    {/* List Header */}
                                    <div className="bg-slate-900/50 p-4 border-b border-slate-700 flex justify-between items-center">
                                        <div className="flex items-center gap-3">
                                            <div className="w-10 h-10 rounded-full bg-purple-600 flex items-center justify-center font-bold text-lg shadow-lg">
                                                {listRoundNumber}
                                            </div>
                                            <span className="font-bold text-slate-300 uppercase tracking-wide">Random Mix</span>
                                        </div>
                                        
                                        <div className="flex gap-2">
                                            <button 
                                                onClick={() => setIsListVisible(!isListVisible)}
                                                className={`text-xs flex items-center gap-2 bg-slate-700 hover:bg-slate-600 text-white px-3 py-1.5 rounded-lg transition-colors border border-slate-600`}
                                                title={isListVisible ? "Hide Categories" : "Reveal Categories"}
                                            >
                                                {isListVisible ? <IconEyeOff /> : <IconEye />}
                                                <span className="hidden sm:inline">{isListVisible ? "Hide" : "Reveal"}</span>
                                            </button>

                                            <button 
                                                onClick={() => generateNewList()}
                                                disabled={isTimerRunning}
                                                className={`text-xs flex items-center gap-2 bg-slate-700 hover:bg-slate-600 text-white px-3 py-1.5 rounded-lg transition-colors ${isTimerRunning ? 'opacity-50 cursor-not-allowed' : ''}`}
                                                title="Shuffle List"
                                            >
                                                Shuffle <IconList size={14}/>
                                            </button>
                                        </div>
                                    </div>

                                    {/* List Items Container - blurred if not visible */}
                                    <div className={`p-6 md:p-8 flex-grow transition-all duration-500 ${!isListVisible ? 'list-blur opacity-50' : 'opacity-100'}`}>
                                        {/* Grid Layout Change: 
                                            md:grid-rows-6 + md:grid-flow-col forces items to fill column 1 (rows 1-6) then column 2 (rows 1-6).
                                        */}
                                        <div className="grid grid-cols-1 md:grid-rows-6 md:grid-flow-col gap-x-12 gap-y-4 h-full">
                                            {currentListItems.map((item, idx) => (
                                                <div key={idx} className="text-lg md:text-xl py-2 border-b border-slate-700/50 text-slate-200 flex items-center">
                                                    <span className="font-mono font-bold text-slate-500 w-8 text-right mr-4 select-none flex-shrink-0">{idx + 1}.</span>
                                                    <span className="leading-tight">{item}</span>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </div>

                                {/* Overlay Message when hidden */}
                                {!isListVisible && (
                                    <div className="absolute inset-0 z-10 flex flex-col items-center justify-center pointer-events-none">
                                        <div className="bg-slate-900/90 border border-slate-600 p-6 rounded-2xl shadow-2xl backdrop-blur-sm text-center transform translate-y-4">
                                            {timerDone ? (
                                                 <div className="text-red-400 text-2xl font-bold uppercase tracking-widest animate-pulse">
                                                    Round Over
                                                 </div>
                                            ) : (
                                                <>
                                                    <div className="text-indigo-400 mb-2">
                                                        <IconPlay size={48} className="mx-auto opacity-80"/>
                                                    </div>
                                                    <h3 className="text-white text-xl font-bold uppercase tracking-wide">Start Timer</h3>
                                                    <p className="text-slate-400 text-sm">or click Reveal to show categories</p>
                                                </>
                                            )}
                                        </div>
                                    </div>
                                )}
                            </div>

                        </div>
                    </main>

                    {/* Edit Modal */}
                    {isEditing && (
                        <div className="fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4">
                            <div className="bg-slate-800 border border-slate-600 rounded-2xl shadow-2xl w-full max-w-5xl h-[85vh] flex flex-col">
                                <div className="p-4 border-b border-slate-700 flex justify-between items-center">
                                    <h3 className="text-xl font-bold text-white flex items-center gap-2">
                                        <IconEdit /> Edit Category Pool
                                    </h3>
                                    <button onClick={cancelEdit} className="text-slate-400 hover:text-white">
                                        <IconX />
                                    </button>
                                </div>
                                
                                <div className="p-4 flex-grow overflow-hidden flex flex-col">
                                    <p className="text-sm text-slate-400 mb-2">
                                        Edit your list below. Each line is a category. The game will pick 12 random items from this list each round.
                                    </p>
                                    <textarea 
                                        className="flex-grow w-full bg-slate-900 border border-slate-700 rounded-lg p-4 text-slate-200 font-mono text-sm leading-relaxed focus:outline-none focus:border-indigo-500 resize-none"
                                        value={editValue}
                                        onChange={(e) => setEditValue(e.target.value)}
                                        spellCheck="false"
                                    />
                                    <div className="mt-2 text-xs text-slate-500 flex justify-between">
                                        <span>{editValue.split('\n').filter(l => l.trim()).length} categories total</span>
                                        <button onClick={resetToDefault} className="text-red-400 hover:text-red-300 underline">Reset to Defaults</button>
                                    </div>
                                </div>

                                <div className="p-4 border-t border-slate-700 flex justify-end gap-3">
                                    <button 
                                        onClick={cancelEdit}
                                        className="px-4 py-2 rounded-lg text-slate-300 hover:bg-slate-700 transition-colors"
                                    >
                                        Cancel
                                    </button>
                                    <button 
                                        onClick={saveCategories}
                                        className="px-6 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg font-bold shadow-lg flex items-center gap-2"
                                    >
                                        <IconCheck size={18} /> Save Changes
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    <footer className="py-6 px-4 text-center text-slate-600 text-xs md:text-sm border-t border-slate-800/50 mt-auto">
                        <div className="flex flex-col md:flex-row items-center justify-center gap-2 md:gap-6">
                            <span className="opacity-80">Categories saved automatically</span>
                            <span className="hidden md:inline text-slate-800">•</span>
                            <span className="opacity-80">
                                Created by <strong className="text-slate-500 font-semibold">Matthew Noren</strong> using <a href="https://gemini.google.com" target="_blank" rel="noopener noreferrer" className="text-indigo-500/70 hover:text-indigo-400 transition-colors underline decoration-indigo-500/30">Gemini 3 Pro</a>
                            </span>
                            <span className="hidden md:inline text-slate-800">•</span>
                            <span className="opacity-60">Press 'F' or Button for Fullscreen</span>
                        </div>
                    </footer>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>